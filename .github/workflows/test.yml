name: Actions Test

on:
  workflow_dispatch:
  push:
    branches:
      - main

jobs:
  mac:
    runs-on: macos-latest
    steps:
      - uses: actions/setup-python@v5
        with:
          python-version: '3.10'
      - uses: actions/setup-node@v4
        with:
          node-version: 20
      - run: npm install -g nexe next
      - run: which next
      - run: nexe --build --input /Users/runner/hostedtoolcache/node/20.13.1/arm64/bin/next
      # - run: uname -a
      # - run: env
      # - run: "ioreg -l | grep IOPlatformSerialNumber"
  # sync:
  #   runs-on: ubuntu-latest
  #   steps:
  #     - run: env
#       - run: echo "app-version=$(echo 'hello')\n" >> $GITHUB_OUTPUT
#         id: foo
#       - run: echo "${{ steps.foo.outputs.app-version }}"
#       - run: |
#           curl \
#           -X POST \
#           -H "Accept: application/vnd.github+json" \
#           -H "Authorization: Bearer ${{ secrets.GITHUB_TOKEN }}" \
#           https://api.github.com/repos/cnuss/actions-test/issues \
#           -d '{"title":"Found a bug","body":"I'\''m having a problem with this.","labels":["bug"]}'
      - run: >
          curl
          -H "Accept: application/vnd.github+json"
          -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}"
          -vvvv
          https://api.github.com/
